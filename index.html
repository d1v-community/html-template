<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Hello</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    .transition-base {
      transition: all 0.25s ease;
    }
  </style>

  <script>
    // -----------------------------------------
    // Load theme: localStorage > system
    // -----------------------------------------
    function applyInitialTheme() {
      const stored = localStorage.getItem("theme");

      if (stored === "light") {
        document.documentElement.classList.remove("dark");
        return;
      }
      if (stored === "dark") {
        document.documentElement.classList.add("dark");
        return;
      }

      // Follow system preference when no localStorage setting
      const systemPrefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
      if (systemPrefersDark) {
        document.documentElement.classList.add("dark");
      } else {
        document.documentElement.classList.remove("dark");
      }
    }

    applyInitialTheme();
  </script>
</head>

<body class="bg-white text-gray-900 dark:bg-black dark:text-gray-100 min-h-screen flex flex-col">

  <!-- Theme Toggle Button -->
  <button
    id="themeToggle"
    class="absolute top-4 right-4 p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-800 transition-base"
  >
    <!-- These icons will update dynamically -->
    <span id="themeIcon" class="text-xl">ðŸŒ“</span>
  </button>

  <!-- Main Content -->
  <main class="flex-1 flex items-center justify-center">
    <h1 class="text-4xl font-bold">Hello World</h1>
  </main>

  <!-- Footer (very small, subtle) -->
  <footer class="text-center text-xs text-gray-400 dark:text-gray-500 pb-4">
    powered by 
    <a 
      href="https://d1v.ai" 
      target="_blank" 
      class="underline hover:text-gray-600 dark:hover:text-gray-300"
    >
      d1v.ai
    </a>
  </footer>

  <!-- Theme Toggle Logic -->
  <script>
    const btn = document.getElementById("themeToggle");
    const icon = document.getElementById("themeIcon");

    // -----------------------------------------
    // Update icon based on current theme
    // -----------------------------------------
    function updateIcon() {
      const isDark = document.documentElement.classList.contains("dark");
      icon.textContent = isDark ? "ðŸŒ™" : "â˜€ï¸";
    }

    updateIcon();

    // -----------------------------------------
    // Toggle theme
    // -----------------------------------------
    btn.addEventListener("click", () => {
      const isDark = document.documentElement.classList.contains("dark");

      if (isDark) {
        document.documentElement.classList.remove("dark");
        localStorage.setItem("theme", "light");
      } else {
        document.documentElement.classList.add("dark");
        localStorage.setItem("theme", "dark");
      }

      updateIcon();
    });

    // -----------------------------------------
    // Listen to system theme change only when 
    // user has NOT manually selected a theme.
    // -----------------------------------------
    const systemMedia = window.matchMedia("(prefers-color-scheme: dark)");
    systemMedia.addEventListener("change", (e) => {
      const stored = localStorage.getItem("theme");
      if (!stored) {
        if (e.matches) {
          document.documentElement.classList.add("dark");
        } else {
          document.documentElement.classList.remove("dark");
        }
        updateIcon();
      }
    });
  </script>

</body>
</html>
